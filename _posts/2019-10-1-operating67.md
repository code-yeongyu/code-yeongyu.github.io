---
layout: post
title: operating system concepts - I/O structure
date: 2019-10-1 23:48:10 +0900
categories: [operating_system]
---

# I/O 구조
## 프롤로그
운영체제 코드의 많은 부분은 I/O를 관리하는것에 중점을 두고있다.  
I/O기기의 다양한 특성, 시스템의 안정성과 성능에 대한 중요성 때문이다.

컴퓨터 시스템은 다양한 수의 기기들로 구성되는데, 이들은 공통된 버스로 소통한다.  
이 방식은 작은양의 데이터를 옮길때에는 괜찮을지 몰라도, 비휘발성 메모리의 I/O처럼 큰 데이터의 움직임을 하는데 사용되면 아주 큰 오버헤드가 발생될 수 있다.  

## DMA(Direct Memory Access)
그래서 이러한 문제를 해결하기 위해 DMA가 사용된다.  
버퍼와 포인터, I/O기기를 위한 카운터가 셋팅되고 난뒤 기기의 컨트롤러는 데이터의 전체 블럭을 기기에서 혹은 기기로부터 주기억장치로 전송한다. CPU의 개입없이 말이다!

쉽게 생각해서, CPU를 경유할 필요없이 주기억장치와 직접적으로 연결되는 전선하나가 있는데, 그게 DMA라고 생각하면 된다.

작업이 끝났음을 알리기 위해 블럭 하나가 끝날때마다만 하나의 인터럽트가 발생한다.(속도가 느린 기기에서 옮길때는 byte당 인터럽트 하나가 발생한다, CPU를 통해 I/O 기기의 데이터를 옮기는 그 방식 말이다.)

CPU의 개입이 없기 때문에 기기의 컨트롤러가 DMA를 사용중이어도 CPU는 다른일을 할 수 있다.

## 여담
몇몇 하이엔드 시스템에서는 bus 아키텍쳐 대신 스위치 아키텍쳐를 사용하기도 한다.  
이러한 시스템에서는 다수의 컴포넌트들이 공유된 버스를 통해 소통하지않고, 동시에 소통 할 수 있다.  
이러한 상황에서는 DMA는 훨씬 더 효율적이다.
